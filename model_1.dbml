// DBML translation of MER and schema.psql

Table Country {
  Code varchar(4) [pk]
  Name varchar(50) [not null, unique]
  Capital varchar(50)
  Province varchar(50)
  Area decimal [note: 'CHECK Area >= 0']
  Population decimal [note: 'CHECK Population >= 0']
}

Table Province {
  Name varchar(50) [not null]
  Country varchar(4) [not null]
  Population decimal [note: 'CHECK Population >= 0']
  Area decimal [note: 'CHECK Area >= 0']
  Capital varchar(50)
  CapProv varchar(50)
  indexes {
    (Name, Country) [pk]
  }
}

Table City {
  Name varchar(50)
  Country varchar(4)
  Province varchar(50)
  Population decimal [note: 'CHECK Population >= 0']
  Latitude decimal [note: 'CHECK -90 <= Latitude <= 90']
  Longitude decimal [note: 'CHECK -180 <= Longitude <= 180']
  Elevation decimal
  indexes {
    (Name, Country, Province) [pk]
  }
}

Table Economy {
  Country varchar(4) [pk]
  GDP decimal [note: 'CHECK GDP >= 0']
  Agriculture decimal
  Service decimal
  Industry decimal
  Inflation decimal
  Unemployment decimal
}

Table Population {
  Country varchar(4) [pk]
  Population_Growth decimal
  Infant_Mortality decimal
}

Table Politics {
  Country varchar(4) [pk]
  Independence date
  WasDependent varchar(50)
  Dependent varchar(4)
  Government varchar(120)
}

Table Religion {
  Country varchar(4)
  Name varchar(50)
  Percentage decimal [note: 'CHECK 0 < Percentage <= 100']
  indexes {
    (Name, Country) [pk]
  }
}

Table EthnicGroup {
  Country varchar(4)
  Name varchar(50)
  Percentage decimal [note: 'CHECK 0 < Percentage <= 100']
  indexes {
    (Name, Country) [pk]
  }
}

Table Language {
  Country varchar(4)
  Name varchar(50)
  Percentage decimal [note: 'CHECK 0 < Percentage <= 100']
  indexes {
    (Name, Country) [pk]
  }
}

Table Sublanguage {
  Sublang varchar(50)
  Suplang varchar(50)
  indexes {
    Sublang [pk]
  }
  Note: 'Assumo que Sublang y Suplang referencian nombres en Language independientemente del país.'
}

Table Countrypops {
  Country varchar(4)
  Year decimal [note: 'CHECK Year >= 0']
  Population decimal [note: 'CHECK Population >= 0']
  indexes {
    (Country, Year) [pk]
  }
}

Table Countryothername {
  Country varchar(4)
  othername varchar(50)
  indexes {
    (Country, othername) [pk]
  }
}

Table Countrylocalname {
  Country varchar(4) [pk]
  localname varchar(300)
}

Table Provpops {
  Province varchar(50)
  Country varchar(4)
  Year decimal [note: 'CHECK Year >= 0']
  Population decimal [note: 'CHECK Population >= 0']
  indexes {
    (Country, Province, Year) [pk]
  }
}

Table Provinceothername {
  Province varchar(50)
  Country varchar(4)
  othername varchar(50)
  indexes {
    (Country, Province, othername) [pk]
  }
}

Table Provincelocalname {
  Province varchar(50)
  Country varchar(4)
  localname varchar(300)
  indexes {
    (Country, Province) [pk]
  }
}

Table Citypops {
  City varchar(50)
  Country varchar(4)
  Province varchar(50)
  Year decimal [note: 'CHECK Year >= 0']
  Population decimal [note: 'CHECK Population >= 0']
  indexes {
    (Country, Province, City, Year) [pk]
  }
}

Table Cityothername {
  City varchar(50)
  Country varchar(4)
  Province varchar(50)
  othername varchar(50)
  indexes {
    (Country, Province, City, othername) [pk]
  }
}

Table Citylocalname {
  City varchar(50)
  Country varchar(4)
  Province varchar(50)
  localname varchar(300)
  indexes {
    (Country, Province, City) [pk]
  }
}

Table Continent {
  Name varchar(20) [pk]
  Area decimal(10)
}

Table borders {
  Country1 varchar(4)
  Country2 varchar(4)
  Length decimal [note: 'CHECK Length > 0']
  indexes {
    (Country1, Country2) [pk]
  }
}

Table encompasses {
  Country varchar(4) [not null]
  Continent varchar(20) [not null]
  Percentage decimal [note: 'CHECK 0 < Percentage <= 100']
  indexes {
    (Country, Continent) [pk]
  }
}

Table Organization {
  Abbreviation varchar(12) [pk]
  Name varchar(100) [not null, unique]
  City varchar(50)
  Country varchar(4)
  Province varchar(50)
  Established date
}

Table isMember {
  Country varchar(4)
  Organization varchar(12)
  Type varchar(60) [default: 'member']
  indexes {
    (Country, Organization) [pk]
  }
}

Table Mountain {
  Name varchar(50) [pk]
  Mountains varchar(50)
  Elevation decimal
  Type varchar(10)
  Coordinates GeoCoord // Asumo tipo compuesto con latitud/longitud
}

Table Desert {
  Name varchar(50) [pk]
  Area decimal
  Coordinates GeoCoord // Asumo tipo compuesto con latitud/longitud
}

Table Island {
  Name varchar(50) [pk]
  Islands varchar(50)
  Area decimal [note: 'CHECK Area >= 0']
  Elevation decimal
  Type varchar(15)
  Coordinates GeoCoord // Asumo tipo compuesto con latitud/longitud
}

Table Lake {
  Name varchar(50) [pk]
  River varchar(50)
  Area decimal [note: 'CHECK Area >= 0']
  Elevation decimal
  Depth decimal [note: 'CHECK Depth >= 0']
  Height decimal [note: 'CHECK Height > 0']
  Type varchar(12)
  Coordinates GeoCoord // Asumo tipo compuesto con latitud/longitud
}

Table Sea {
  Name varchar(50) [pk]
  Area decimal [note: 'CHECK Area >= 0']
  Depth decimal [note: 'CHECK Depth >= 0']
}

Table River {
  Name varchar(50) [pk]
  River varchar(50)
  Lake varchar(50)
  Sea varchar(50)
  Length decimal [note: 'CHECK Length >= 0']
  Area decimal [note: 'CHECK Area >= 0']
  Source GeoCoord // Asumo tipo compuesto con latitud/longitud
  Mountains varchar(50)
  SourceElevation decimal
  Estuary GeoCoord // Asumo tipo compuesto con latitud/longitud
  EstuaryElevation decimal
}

Table RiverThrough {
  River varchar(50)
  Lake varchar(50)
  indexes {
    (River, Lake) [pk]
  }
}

Table geo_Mountain {
  Mountain varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, Mountain) [pk]
  }
}

Table geo_Desert {
  Desert varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, Desert) [pk]
  }
}

Table geo_Island {
  Island varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, Island) [pk]
  }
}

Table geo_River {
  River varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, River) [pk]
  }
}

Table geo_Sea {
  Sea varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, Sea) [pk]
  }
}

Table geo_Lake {
  Lake varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, Lake) [pk]
  }
}

Table geo_Source {
  River varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, River) [pk]
  }
}

Table geo_Estuary {
  River varchar(50)
  Country varchar(4)
  Province varchar(50)
  indexes {
    (Province, Country, River) [pk]
  }
}

Table mergesWith {
  Sea1 varchar(50)
  Sea2 varchar(50)
  indexes {
    (Sea1, Sea2) [pk]
  }
}

Table located {
  City varchar(50)
  Province varchar(50)
  Country varchar(4)
  River varchar(50)
  Lake varchar(50)
  Sea varchar(50)
}

Table locatedOn {
  City varchar(50)
  Province varchar(50)
  Country varchar(4)
  Island varchar(50)
  indexes {
    (City, Province, Country, Island) [pk]
  }
}

Table islandIn {
  Island varchar(50)
  Sea varchar(50)
  Lake varchar(50)
  River varchar(50)
}

Table MountainOnIsland {
  Mountain varchar(50)
  Island varchar(50)
  indexes {
    (Mountain, Island) [pk]
  }
}

Table LakeOnIsland {
  Lake varchar(50)
  Island varchar(50)
  indexes {
    (Lake, Island) [pk]
  }
}

Table RiverOnIsland {
  River varchar(50)
  Island varchar(50)
  indexes {
    (River, Island) [pk]
  }
}

Table Airport {
  IATACode varchar(3) [pk]
  Name varchar(100)
  Country varchar(4)
  City varchar(50)
  Province varchar(50)
  Island varchar(50)
  Latitude decimal [note: 'CHECK -90 <= Latitude <= 90']
  Longitude decimal [note: 'CHECK -180 <= Longitude <= 180']
  Elevation decimal
  gmtOffset decimal
}

// Relationships inferred from MER and schema; algunas claves foráneas no estaban en el DDL original.
Ref: Province.Country > Country.Code
Ref: City.Country > Country.Code
Ref: City.Province > Province.Name
Ref: Country.Capital > City.Name // Asumo capital almacenada en City
Ref: Country.Province > Province.Name // Asumo referencia para capital provincial
Ref: Province.Capital > City.Name
Ref: Province.CapProv > Province.Name
Ref: Economy.Country > Country.Code
Ref: Population.Country > Country.Code
Ref: Politics.Country > Country.Code
Ref: Politics.Dependent > Country.Code
Ref: Religion.Country > Country.Code
Ref: EthnicGroup.Country > Country.Code
Ref: Language.Country > Country.Code
Ref: Countrypops.Country > Country.Code
Ref: Countryothername.Country > Country.Code
Ref: Countrylocalname.Country > Country.Code
Ref: Provpops.Country > Country.Code
Ref: Provpops.Province > Province.Name
Ref: Provinceothername.Country > Country.Code
Ref: Provinceothername.Province > Province.Name
Ref: Provincelocalname.Country > Country.Code
Ref: Provincelocalname.Province > Province.Name
Ref: Citypops.Country > Country.Code
Ref: Citypops.Province > Province.Name
Ref: Citypops.City > City.Name
Ref: Cityothername.Country > Country.Code
Ref: Cityothername.Province > Province.Name
Ref: Cityothername.City > City.Name
Ref: Citylocalname.Country > Country.Code
Ref: Citylocalname.Province > Province.Name
Ref: Citylocalname.City > City.Name
Ref: borders.Country1 > Country.Code
Ref: borders.Country2 > Country.Code
Ref: encompasses.Country > Country.Code
Ref: encompasses.Continent > Continent.Name
Ref: Organization.Country > Country.Code
Ref: Organization.Province > Province.Name
Ref: Organization.City > City.Name
Ref: isMember.Country > Country.Code
Ref: isMember.Organization > Organization.Abbreviation
Ref: RiverThrough.River > River.Name
Ref: RiverThrough.Lake > Lake.Name
Ref: geo_Mountain.Country > Country.Code
Ref: geo_Mountain.Province > Province.Name
Ref: geo_Mountain.Mountain > Mountain.Name
Ref: geo_Desert.Country > Country.Code
Ref: geo_Desert.Province > Province.Name
Ref: geo_Desert.Desert > Desert.Name
Ref: geo_Island.Country > Country.Code
Ref: geo_Island.Province > Province.Name
Ref: geo_Island.Island > Island.Name
Ref: geo_River.Country > Country.Code
Ref: geo_River.Province > Province.Name
Ref: geo_River.River > River.Name
Ref: geo_Sea.Country > Country.Code
Ref: geo_Sea.Province > Province.Name
Ref: geo_Sea.Sea > Sea.Name
Ref: geo_Lake.Country > Country.Code
Ref: geo_Lake.Province > Province.Name
Ref: geo_Lake.Lake > Lake.Name
Ref: geo_Source.Country > Country.Code
Ref: geo_Source.Province > Province.Name
Ref: geo_Source.River > River.Name
Ref: geo_Estuary.Country > Country.Code
Ref: geo_Estuary.Province > Province.Name
Ref: geo_Estuary.River > River.Name
Ref: mergesWith.Sea1 > Sea.Name
Ref: mergesWith.Sea2 > Sea.Name
Ref: located.Country > Country.Code
Ref: located.Province > Province.Name
Ref: located.City > City.Name
Ref: located.River > River.Name
Ref: located.Lake > Lake.Name
Ref: located.Sea > Sea.Name
Ref: locatedOn.Country > Country.Code
Ref: locatedOn.Province > Province.Name
Ref: locatedOn.City > City.Name
Ref: locatedOn.Island > Island.Name
Ref: islandIn.Island > Island.Name
Ref: islandIn.Sea > Sea.Name
Ref: islandIn.Lake > Lake.Name
Ref: islandIn.River > River.Name
Ref: MountainOnIsland.Mountain > Mountain.Name
Ref: MountainOnIsland.Island > Island.Name
Ref: LakeOnIsland.Lake > Lake.Name
Ref: LakeOnIsland.Island > Island.Name
Ref: RiverOnIsland.River > River.Name
Ref: RiverOnIsland.Island > Island.Name
Ref: Airport.Country > Country.Code
Ref: Airport.Province > Province.Name
Ref: Airport.City > City.Name
Ref: Airport.Island > Island.Name
